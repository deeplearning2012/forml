# TODO: use custom error type instead of assertions